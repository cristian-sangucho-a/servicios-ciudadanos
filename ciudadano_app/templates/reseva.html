{% extends 'base.html' %}

{% block title %}Realiza tu reserva{% endblock %}

{% block content %}
<div class="flex items-center justify-center">
    <div class="bg-white p-8 rounded shadow-md w-full max-w-md">
        <h1 class="text-2xl font-bold mb-6 text-center text-primario-DEFAULT">Realiza tu reserva</h1>
        <form method="POST">
            {% csrf_token %}
            {{ form.fecha_reserva }}
            {{ form.hora_inicio }}
            {{ form.hora_fin }}
            {{ form.tipo_reserva }}
            <div id="correos_invitados_field" style="display: none;">
                <label for="correos_invitados">Correos de Invitados</label>
                {{ form.correos_invitados }}
            </div>
            {{ form.estado_reserva.as_hidden }}
            {{ form.ciudadano.as_hidden }}
            {{ form.area_comunal.as_hidden }}
            <button type="submit"
                    class="w-full m-3 bg-primario text-white py-2 px-4 rounded hover:bg-primario-light transition duration-200">
                Reservar
            </button>
        </form>
    </div>
    <div class="w-1/3 ml-8 p-4 bg-gray-100 rounded shadow-md">
        <h2 class="text-xl font-bold mb-4">Información del Usuario</h2>
        <p><strong>Nombre:</strong> {{ request.user.nombre_completo }}</p>
        <p><strong>Correo Electrónico:</strong> {{ request.user.correo_electronico }}</p>
        <h2 class="text-xl font-bold mt-6 mb-4">Área Comunal</h2>
        <p><strong>Nombre del Área:</strong> {{ form.initial.area_comunal }}</p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tipoReservaField = document.querySelector('select[name="tipo_reserva"]');
        const correosInvitadosField = document.querySelector('input[name="correos_invitados"]').parentElement;

        function toggleCorreosInvitados() {
            if (tipoReservaField.value === 'privado') {
                correosInvitadosField.style.display = 'block';
            } else {
                correosInvitadosField.style.display = 'none';
            }
        }

        tipoReservaField.addEventListener('change', toggleCorreosInvitados);
        toggleCorreosInvitados();
    });
</script>
{% endblock %}